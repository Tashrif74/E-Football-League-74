<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>User Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Oswald:wght@500;700&display=swap" rel="stylesheet">
<style>
body{margin:0;font-family:'Inter',sans-serif;background:#020617;color:#f8fafc;}
.container{width:95%;max-width:1200px;margin:auto;padding:20px;}
h1{margin-bottom:20px;font-family:'Oswald',sans-serif;color:#22c55e;}
nav{display:flex;gap:10px;margin-bottom:20px;}
nav button{padding:10px 20px;border:none;border-radius:6px;background:#0b1220;color:#94a3b8;cursor:pointer;transition:0.3s;}
nav button.active{background:#22c55e;color:#020617;font-weight:700;}
section{display:none;animation:fade 0.5s;}
section.active{display:block;}
table{width:100%;border-collapse:collapse;margin-top:10px;}
th,td{border:1px solid #1e293b;padding:8px;text-align:center;}
th{background:#132035;}

/* Highlight top 1 team */
table tr:nth-child(2){background: linear-gradient(90deg,#FFD700,#FFE066);font-weight:700;}

/* Responsive */
@media(max-width:768px){
  body{padding:10px;}
  nav{flex-direction:column;}
  nav button{width:100%; margin-bottom:8px;}
  table, thead, tbody, th, td, tr{display:block;width:100%;}
  thead{display:none;}
  td{position:relative;padding-left:50%;border:none;border-bottom:1px solid #1e293b;}
  td::before{position:absolute;left:10px;width:45%;white-space:nowrap;font-weight:bold;color:#22c55e;}
  td:nth-of-type(1)::before{content:"Pos";}
  td:nth-of-type(2)::before{content:"Team";}
  td:nth-of-type(3)::before{content:"P";}
  td:nth-of-type(4)::before{content:"W";}
  td:nth-of-type(5)::before{content:"D";}
  td:nth-of-type(6)::before{content:"L";}
  td:nth-of-type(7)::before{content:"GF";}
  td:nth-of-type(8)::before{content:"GA";}
  td:nth-of-type(9)::before{content:"GD";}
  td:nth-of-type(10)::before{content:"Pts";}
}
@keyframes fade{from{opacity:0} to{opacity:1}}
</style>
</head>
<body>
<div class="container">
<h1>User Dashboard</h1>
<nav>
<button class="tabBtn active" data-target="home">Home</button>
<button class="tabBtn" data-target="matches">Matches</button>
<button class="tabBtn" data-target="standings">Standings</button>
<button class="tabBtn" data-target="logout">Logout</button>
</nav>

<section id="home" class="active"><h2>Welcome Player!</h2><p>Check your league information here.</p></section>
<section id="matches"><h2>Matches</h2><div id="matchTable"></div></section>
<section id="standings"><h2>Standings</h2><div id="standingsTable"></div></section>
</div>

<script>
// Tabs
const tabs=document.querySelectorAll(".tabBtn");const sections=document.querySelectorAll("section");
tabs.forEach(tab=>{tab.onclick=()=>{
  if(tab.dataset.target==="logout"){window.location.href="index.html"; return;}
  tabs.forEach(t=>t.classList.remove("active"));tab.classList.add("active");
  sections.forEach(s=>s.classList.remove("active"));document.getElementById(tab.dataset.target).classList.add("active");
  if(tab.dataset.target==="matches")loadMatches();
  if(tab.dataset.target==="standings")loadStandings();
}});

// Matches
function loadMatches(){
  const container=document.getElementById("matchTable");let matches=JSON.parse(localStorage.getItem("leagueMatches")||"[]");
  if(matches.length===0){container.innerHTML="No matches yet.";return;}
  let html="<table><tr><th>#</th><th>Home</th><th>Away</th><th>Score</th><th>Status</th></tr>";
  matches.forEach((m,i)=>{html+=`<tr><td>${i+1}</td><td>${m.home}</td><td>${m.away}</td><td>${m.finished?m.homeScore+" - "+m.awayScore:"-"}</td><td>${m.finished?"Finished":"Pending"}</td></tr>`;});
  html+="</table>";container.innerHTML=html;
}

// Standings
function loadStandings(){
  const container=document.getElementById("standingsTable");let lp=JSON.parse(localStorage.getItem("leaguePoints")||"{}");
  if(Object.keys(lp).length===0){container.innerHTML="No standings yet.";return;}
  let arr=Object.keys(lp).map(t=>({team:t,...lp[t]}));
  arr.sort((a,b)=>b.points-a.points||b.gd-a.gd||b.gf-a.gf);
  let html="<table><tr><th>Pos</th><th>Team</th><th>P</th><th>W</th><th>D</th><th>L</th><th>GF</th><th>GA</th><th>GD</th><th>Pts</th></tr>";
  arr.forEach((t,i)=>{html+=`<tr>
<td>${i+1}</td>
<td>${t.team}</td>
<td>${t.played}</td>
<td>${t.win}</td>
<td>${t.draw}</td>
<td>${t.loss}</td>
<td>${t.gf}</td>
<td>${t.ga}</td>
<td>${t.gd}</td>
<td>${t.points}</td>
</tr>`;});
  html+="</table>";container.innerHTML=html;
}
</script>
</body>
</html>
